<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tensorflow+Vue | Articles</title>
    <meta name="description" content="教程-总结-思考">
    <link rel="icon" href="/articles/favicon.png" type="image/x-icon">
    
    <link rel="preload" href="/articles/assets/css/0.styles.6a8fa7ce.css" as="style"><link rel="preload" href="/articles/assets/js/app.9d4cdcbf.js" as="script"><link rel="preload" href="/articles/assets/js/19.f17b3290.js" as="script"><link rel="prefetch" href="/articles/assets/js/10.8b5481ef.js"><link rel="prefetch" href="/articles/assets/js/11.81636287.js"><link rel="prefetch" href="/articles/assets/js/12.97011473.js"><link rel="prefetch" href="/articles/assets/js/13.17c61958.js"><link rel="prefetch" href="/articles/assets/js/14.b2167944.js"><link rel="prefetch" href="/articles/assets/js/15.8a0ee30d.js"><link rel="prefetch" href="/articles/assets/js/16.5729fe70.js"><link rel="prefetch" href="/articles/assets/js/17.1510764d.js"><link rel="prefetch" href="/articles/assets/js/18.95c78ec2.js"><link rel="prefetch" href="/articles/assets/js/2.20d0b930.js"><link rel="prefetch" href="/articles/assets/js/20.64efcb42.js"><link rel="prefetch" href="/articles/assets/js/21.448db766.js"><link rel="prefetch" href="/articles/assets/js/22.1f411ba9.js"><link rel="prefetch" href="/articles/assets/js/23.cd0fba93.js"><link rel="prefetch" href="/articles/assets/js/24.551bee19.js"><link rel="prefetch" href="/articles/assets/js/25.8c3f41de.js"><link rel="prefetch" href="/articles/assets/js/26.73bdeb40.js"><link rel="prefetch" href="/articles/assets/js/27.6604ca01.js"><link rel="prefetch" href="/articles/assets/js/28.f3b818da.js"><link rel="prefetch" href="/articles/assets/js/3.0387172f.js"><link rel="prefetch" href="/articles/assets/js/4.5ca12a0d.js"><link rel="prefetch" href="/articles/assets/js/5.507610f1.js"><link rel="prefetch" href="/articles/assets/js/6.220a202d.js"><link rel="prefetch" href="/articles/assets/js/7.c2f65b94.js"><link rel="prefetch" href="/articles/assets/js/8.b509b70c.js"><link rel="prefetch" href="/articles/assets/js/9.28b593b6.js">
    <link rel="stylesheet" href="/articles/assets/css/0.styles.6a8fa7ce.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/articles/" class="home-link router-link-active"><!----> <span class="site-name">Articles</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/articles/" class="nav-link">主页</a></div><div class="nav-item"><a href="/articles/Menus/" class="nav-link">目录</a></div><div class="nav-item"><a href="https://github.com/JiangWeixian/articles" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/articles/" class="nav-link">主页</a></div><div class="nav-item"><a href="/articles/Menus/" class="nav-link">目录</a></div><div class="nav-item"><a href="https://github.com/JiangWeixian/articles" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/articles/ProjectSummary/" class="sidebar-link">/ProjectSummary/</a></li><li><a href="/articles/ProjectSummary/2016-socket.io聊天室大致总结.html" class="sidebar-link">聊天室总结</a></li><li><a href="/articles/ProjectSummary/2018-simplemusic.html" class="sidebar-link">simple-music</a></li><li><a href="/articles/ProjectSummary/2018-tensorflow图像分类.html" class="active sidebar-link">Tensorflow+Vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/articles/ProjectSummary/2018-tensorflow图像分类.html#关键技术" class="sidebar-link">关键技术</a></li><li class="sidebar-sub-header"><a href="/articles/ProjectSummary/2018-tensorflow图像分类.html#流程" class="sidebar-link">流程</a></li><li class="sidebar-sub-header"><a href="/articles/ProjectSummary/2018-tensorflow图像分类.html#调用摄像头" class="sidebar-link">调用摄像头</a></li><li class="sidebar-sub-header"><a href="/articles/ProjectSummary/2018-tensorflow图像分类.html#检测" class="sidebar-link">检测</a></li><li class="sidebar-sub-header"><a href="/articles/ProjectSummary/2018-tensorflow图像分类.html#显示" class="sidebar-link">显示</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="tensorflow-vue"><a href="#tensorflow-vue" aria-hidden="true" class="header-anchor">#</a> Tensorflow+Vue</h1> <ul><li><a href="#tensorflowvue">Tensorflow+Vue</a> <ul><li><a href="#%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF">关键技术</a></li> <li><a href="#%E6%B5%81%E7%A8%8B">流程</a></li> <li><a href="#%E8%B0%83%E7%94%A8%E6%91%84%E5%83%8F%E5%A4%B4">调用摄像头</a> <ul><li><a href="#%E6%B5%81%E7%A8%8B-1">流程</a></li></ul></li> <li><a href="#%E6%A3%80%E6%B5%8B">检测</a> <ul><li><a href="#%E6%B5%81%E7%A8%8B-2">流程</a></li></ul></li> <li><a href="#%E6%98%BE%E7%A4%BA">显示</a> <ul><li><a href="#%E9%97%AE%E9%A2%98%E6%89%80%E5%9C%A8">问题所在？</a></li></ul></li></ul></li></ul> <h2 id="关键技术"><a href="#关键技术" aria-hidden="true" class="header-anchor">#</a> 关键技术</h2> <ul><li>tensorflow.js and mobilenet - 都是<code>NPM</code>包</li> <li>调用手机<code>camera</code></li> <li><a href="https://github.com/JiangWeixian/tf-mobilenet-vue" target="_blank" rel="noopener noreferrer">项目地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="流程"><a href="#流程" aria-hidden="true" class="header-anchor">#</a> 流程</h2> <p>检测分为三个阶段：获取模型输入、进行检测和输出结果</p> <ol><li>获取输入 - 通过调用摄像头来获取输入图像</li> <li>将摄像头得到的一帧图像作为模型输入</li> <li>将模型的检测结果返回，并输出到屏幕上</li></ol> <h2 id="调用摄像头"><a href="#调用摄像头" aria-hidden="true" class="header-anchor">#</a> 调用摄像头</h2> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/MediaDevices/getUserMedia" target="_blank" rel="noopener noreferrer">MDN-官方API参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <ul><li>获取摄像头数目(前置和后置) - <code>navigator.mediaDevices.enumerateDevices</code></li> <li>获取摄像头 - <code>navigator.getUserMedia</code>，现在新的<code>API</code>是<code>navigator.mediaDevices.getUserMedia</code>。可以设置 <strong>视频，音频以及是否前置后置摄像头</strong></li></ul> <h3 id="流程-2"><a href="#流程-2" aria-hidden="true" class="header-anchor">#</a> 流程</h3> <ol><li>初始化摄像头 - 针对不同浏览器统一接口函数</li> <li>获取摄像头数目</li> <li>将摄像头数目、音频和视频(是否开启)作为参数传递来开启摄像头</li></ol> <p><strong>将视频流显示</strong></p> <p>结合<code>video</code>标签使用，设置<code>video.src</code>为获取得到视频流(MDN做了兼容处理)</p> <p><strong>截取其中某一帧</strong></p> <p><code>SVG</code>具有画图功能</p> <ul><li><code>drawImage</code> - 画图。在这个项目中，直接将<code>video</code>标签传递进来</li> <li><code>toDataURL</code> - 将<code>svg</code>变为<code>image</code>的<code>src</code>，起到显示作用</li></ul> <h2 id="检测"><a href="#检测" aria-hidden="true" class="header-anchor">#</a> 检测</h2> <p><a href="https://js.tensorflow.org/" target="_blank" rel="noopener noreferrer">tensorflow.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>在本例中，直接使用<code>tensorflow</code>的转换功能，将网络权重转换为网络模型。</p> <p>如果想要训练的话，官方给了<a href="https://js.tensorflow.org/tutorials/mnist.html" target="_blank" rel="noopener noreferrer">mnist例子<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。大体流程和<code>python</code>版本一致：</p> <ol><li>加载数据(包括输入和输出) - <code>data</code>通过<code>Image</code>数据并转化为<code>SVG</code>作为<code>image-data</code>，具体可看<a href="https://github.com/tensorflow/tfjs-examples/blob/master/mnist/data.js" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</li> <li>构建网络模型</li> <li>设置误差更新目标函数，以及误差速率等</li> <li>然后训练</li></ol> <p>更多例子。</p> <p>所以想要在更为复杂的数据集上训练并不合适：</p> <ol><li>如果通过<code>nodejs</code>来辅助的话，为什么不使用<code>python-tensorflow</code>然后转化为<code>tensorflow.js</code>使用</li> <li>如果可以想要以<code>mnist</code>方式训练，数据请求是一个大问题</li></ol> <p><strong>这个一定要注意！也要说清楚。</strong></p> <h3 id="流程-3"><a href="#流程-3" aria-hidden="true" class="header-anchor">#</a> 流程</h3> <ol><li>加载网络模型 - 包括加载权重和构建网络</li> <li>然后将 <strong>调用摄像头</strong>中获得的图像作为输入。获得检测结果，接下来进入显示阶段。</li></ol> <h2 id="显示"><a href="#显示" aria-hidden="true" class="header-anchor">#</a> 显示</h2> <p>了解了<code>debounce</code>之后，这部分还有改进部分。目前的方式是：</p> <ol><li>检测得到结果，设置显示<code>flag=true</code></li> <li>如果检测到<code>flag</code>为<code>true</code>。就开始进入显示动画，显示动画持续一段时间，然后消失。</li></ol> <h3 id="问题所在？"><a href="#问题所在？" aria-hidden="true" class="header-anchor">#</a> 问题所在？</h3> <p>关键就在于这个显示。</p> <p>因为如果连续点击检测按钮的话会有问题。可以参考<code>debounce</code>方法改进。</p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/articles/assets/js/app.9d4cdcbf.js" defer></script><script src="/articles/assets/js/19.f17b3290.js" defer></script>
  </body>
</html>
